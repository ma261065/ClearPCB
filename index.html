<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClearPCB - Schematic Editor</title>
    <link rel="icon" href="assets/icons/favicon.ico">
    <link rel="stylesheet" href="src/ui/schematic.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#27ae60">
</head>
<body>
    <div class="ribbon">
        <div class="ribbon-tabs">
            <div class="ribbon-tab active" data-tab="file">File</div>
            <div class="ribbon-tab" data-tab="home">Home</div>
            <div class="ribbon-tab" data-tab="properties">Properties</div>
            <div class="ribbon-tab" data-tab="help">Help</div>
            <div class="ribbon-spacer"></div>
            <span id="docTitle" class="ribbon-title">untitled.json</span>
        </div>
        <div class="ribbon-panels">
            <div class="ribbon-panel active" data-panel="file">
                <div class="ribbon-group">
                    <div class="ribbon-group-title">File</div>
                    <div class="ribbon-group-items">
                        <button id="ribbonNew" title="New (Ctrl+N)">üìÑ New</button>
                        <button id="ribbonOpen" title="Open (Ctrl+O)">üìÇ Open</button>
                        <button id="ribbonSave" title="Save (Ctrl+S)">üíæ Save</button>
                        <button id="ribbonSaveAs" title="Save As (Ctrl+Alt+S)">üíæ Save As</button>
                        <button id="ribbonExportPdf" title="Export PDF (Ctrl+Shift+P)">üßæ Export PDF</button>
                        <button id="ribbonPrint" title="Print (Ctrl+P)">üñ®Ô∏è Print</button>
                    </div>
                </div>
            </div>
            <div class="ribbon-panel" data-panel="home">
                <div class="ribbon-group">
                    <div class="ribbon-group-title">Shape</div>
                    <div class="ribbon-shape-body">
                        <div class="ribbon-group-items ribbon-shape-tools">
                            <button class="ribbon-tool-btn" data-tool="select" title="Select (V)">‚äπ Select</button>
                            <button class="ribbon-tool-btn" data-tool="line" title="Line (L)">‚ï± Line</button>
                            <button class="ribbon-tool-btn" data-tool="wire" title="Wire (W)">‚óè‚è§‚óè Wire</button>
                            <button class="ribbon-tool-btn" data-tool="rect" title="Rectangle (R)">‚ñ¢ Rect</button>
                            <button class="ribbon-tool-btn" data-tool="circle" title="Circle (C)">‚óã Circle</button>
                            <button class="ribbon-tool-btn" data-tool="arc" title="Arc (A)">‚ó† Arc</button>
                            <button class="ribbon-tool-btn" data-tool="polygon" title="Polygon (P)">‚¨† Polygon</button>
                            <button class="ribbon-tool-btn" data-tool="text" title="Text (T)">T Text</button>
                            <button class="ribbon-tool-btn" data-tool="component" title="Component (I)">‚äû Component</button>
                        </div>
                        <div class="ribbon-shape-options" id="ribbonShapeOptions"></div>
                    </div>
                </div>
                <div class="ribbon-group">
                    <div class="ribbon-group-title">History</div>
                    <div class="ribbon-group-items">
                        <button id="undoBtn" title="Undo (Ctrl+Z)">‚Ü∂</button>
                        <button id="redoBtn" title="Redo (Ctrl+Y)">‚Ü∑</button>
                    </div>
                </div>
                <div class="ribbon-group">
                    <div class="ribbon-group-title">Grid</div>
                    <div class="ribbon-group-items">
                        <label class="ribbon-checkbox"><input type="checkbox" id="showGrid" checked> Grid</label>
                        <label class="ribbon-checkbox"><input type="checkbox" id="snapToGrid" checked> Snap</label>
                        <select id="gridSize">
                            <!-- Options populated by JavaScript based on units -->
                            <option value="1">1 mm</option>
                        </select>
                        <select id="gridStyle">
                            <option value="lines" selected>Lines</option>
                            <option value="dots">Dots</option>
                        </select>
                        <select id="units">
                            <option value="mm" selected>mm</option>
                            <option value="mil">mil</option>
                            <option value="inch">inch</option>
                        </select>
                    </div>
                </div>
                <div class="ribbon-group">
                    <div class="ribbon-group-title">Paper</div>
                    <div class="ribbon-group-items">
                        <select id="paperSize">
                            <option value="">None</option>
                            <optgroup label="Metric">
                                <option value="A4">A4 (210 √ó 297 mm)</option>
                                <option value="A3">A3 (297 √ó 420 mm)</option>
                                <option value="A2">A2 (420 √ó 594 mm)</option>
                                <option value="A1">A1 (594 √ó 841 mm)</option>
                                <option value="A0">A0 (841 √ó 1189 mm)</option>
                            </optgroup>
                            <optgroup label="Imperial">
                                <option value="Letter">Letter (8.5 √ó 11 inch)</option>
                                <option value="Legal">Legal (8.5 √ó 14 inch)</option>
                                <option value="Tabloid">Tabloid (11 √ó 17 inch)</option>
                            </optgroup>
                        </select>
                        <select id="paperOrientation">
                            <option value="landscape" selected>Landscape</option>
                            <option value="portrait">Portrait</option>
                        </select>
                    </div>
                </div>
                <div class="ribbon-group">
                    <div class="ribbon-group-title">View</div>
                    <div class="ribbon-group-items">
                        <button id="zoomIn" title="Zoom In">+</button>
                        <button id="zoomOut" title="Zoom Out">‚àí</button>
                        <button id="zoomFit" title="Fit to Content">Fit</button>
                        <button id="resetView" title="Reset View">Reset</button>
                        <button id="themeToggle" class="theme-toggle" title="Toggle Dark/Light Mode">üåô</button>
                    </div>
                </div>
            </div>
            <div class="ribbon-panel" data-panel="properties">
                <div class="ribbon-group ribbon-properties">
                    <div class="ribbon-group-title" id="propertiesHeaderLabel">Properties</div>
                    <div class="ribbon-group-items ribbon-properties-content" id="propertiesPanel">
                        <div class="prop-row">
                            <span class="prop-value" id="propSelectionCount">None selected</span>
                        </div>
                        <div class="prop-row">
                            <label>
                                <input type="checkbox" id="propLocked"> Locked
                            </label>
                        </div>
                        <div class="prop-row">
                            <label for="propLineWidth">Line width</label>
                            <input type="number" id="propLineWidth" step="0.25" min="0.25" max="5" placeholder="‚Äî">
                        </div>
                        <div class="prop-row">
                            <label>
                                <input type="checkbox" id="propFill"> Fill
                            </label>
                        </div>
                        <div class="prop-row">
                            <label for="propTextSize">Text size</label>
                            <input type="number" id="propTextSize" step="1" min="1" max="50" placeholder="‚Äî">
                        </div>
                        <div class="prop-row">
                            <div class="ribbon-group-items">
                                <button id="ribbonRotate" title="Rotate Components">‚ü≥ Rotate</button>
                                <button id="ribbonDelete" class="ribbon-danger" title="Delete (Del)">üóëÔ∏è Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ribbon-panel" data-panel="help">
                <div class="ribbon-group ribbon-help">
                    <div class="ribbon-group-title">Keyboard Shortcuts</div>
                    <div class="ribbon-group-items ribbon-help-items">
                        <div class="help-row"><span><kbd>Ctrl+N</kbd> New file</span></div>
                        <div class="help-row"><span><kbd>Ctrl+O</kbd> Open file</span></div>
                        <div class="help-row"><span><kbd>Ctrl+S</kbd> Save</span></div>
                        <div class="help-row"><span><kbd>Ctrl+Alt+S</kbd> Save As</span></div>
                        <div class="help-row"><span><kbd>Ctrl+Shift+P</kbd> Save PDF</span></div>
                        <div class="help-row"><span><kbd>Ctrl+Z</kbd> Undo</span></div>
                        <div class="help-row"><span><kbd>Ctrl+Y</kbd> Redo</span></div>
                        <div class="help-row"><span><kbd>V</kbd> Select</span></div>
                        <div class="help-row"><span><kbd>L</kbd> Line</span></div>
                        <div class="help-row"><span><kbd>W</kbd> Wire</span></div>
                        <div class="help-row"><span><kbd>R</kbd> Rectangle</span></div>
                        <div class="help-row"><span><kbd>C</kbd> Circle</span></div>
                        <div class="help-row"><span><kbd>A</kbd> Arc</span></div>
                        <div class="help-row"><span><kbd>P</kbd> Polygon</span></div>
                        <div class="help-row"><span><kbd>Esc</kbd> Cancel / Select mode</span></div>
                        <div class="help-row"><span><kbd>Del</kbd> Delete selected</span></div>
                        <div class="help-row"><span><kbd>Ctrl+A</kbd> Select all</span></div>
                        <div class="help-row"><span><kbd>Drag shape</kbd> Move</span></div>
                        <div class="help-row"><span><kbd>Drag anchor</kbd> Resize/Edit</span></div>
                        <div class="help-row"><span><kbd>Drag empty</kbd> Box select</span></div>
                        <div class="help-row"><span><kbd>Ctrl+Click</kbd> Multi-select</span></div>
                        <div class="help-row"><span><kbd>Right-drag</kbd> Pan</span></div>
                        <div class="help-row"><span><kbd>Scroll</kbd> Zoom</span></div>
                        <div class="help-row"><span id="version-display" class="help-version"></span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="canvas-container" id="canvasContainer">
            <svg class="drawing-crosshair" id="drawingCrosshair">
                <line id="crosshairX" stroke="var(--accent-color)" stroke-width="1" stroke-dasharray="4,4"/>
                <line id="crosshairY" stroke="var(--accent-color)" stroke-width="1" stroke-dasharray="4,4"/>
                <path id="crosshairToolIcon" d="" />
            </svg>
        </div>
    </div>

    <div class="status-bar">
        <div class="status-item">
            <span class="label">Cursor:</span>
            <span class="value" id="cursorPos">0.00, 0.00 mm</span>
        </div>
        <div class="status-item">
            <span class="label">Snap:</span>
            <span class="value" id="gridSnap">0.00, 0.00 mm</span>
        </div>
        <div class="status-item">
            <span class="label">View:</span>
            <span class="value" id="viewportInfo">500 √ó 300 mm</span>
        </div>
        <div class="status-item">
            <span class="label">Zoom:</span>
            <span class="value" id="zoomPercent">100%</span>
        </div>
    </div>

    <script type="module" src="./src/ui/SchematicApp.js"></script>
</body>
</html>